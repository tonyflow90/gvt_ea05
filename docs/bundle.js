!function(){"use strict";var t="undefined"!=typeof Float32Array?Float32Array:Array;function e(){var e=new t(16);return t!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});let n=(()=>{let t=10,e=10,r=new Float32Array(363),i=new Float32Array(363),n=new Uint16Array(400),a=new Uint16Array(600),o=2*Math.PI/t,l=0,s=0;for(let c=0,f=0;c<=t;c++,f+=o)for(let t=0,o=0;t<=e;t++,o+=.1){let e,A,u=11*c+t,b=0;e=o*Math.cos(f)+1,A=o*Math.sin(f),b=.5-o,r[3*u]=e,r[3*u+1]=b,r[3*u+2]=A,i[3*u]=0,i[3*u+1]=1,i[3*u+2]=0,t>0&&c>0&&(n[l++]=u-1,n[l++]=u),t>0&&c>0&&(n[l++]=u-11,n[l++]=u),t>0&&c>0&&(a[s++]=u,a[s++]=u-1,a[s++]=u-11,a[s++]=u-1,a[s++]=u-11-1,a[s++]=u-11)}return{vertices:r,normals:i,indicesLines:n,indicesTris:a}})(),a=(()=>{let t=10,e=10,r=new Float32Array(363),i=new Float32Array(363),n=new Uint16Array(400),a=new Uint16Array(600),o=2*Math.PI/t,l=Math.PI/e,s=0,c=0;for(let b=0,h=0;b<=t;b++,h+=o)for(let t=0,o=0;t<=e;t++,o+=l){let e,l,M=11*b+t,E=0;e=.8*Math.sin(o)*Math.cos(h)-1,l=.8*Math.sin(o)*Math.sin(h),E=.8*Math.cos(o),r[3*M]=e,r[3*M+1]=E,r[3*M+2]=l;var f=Math.sin(o)*Math.cos(h),A=Math.sin(o)*Math.sin(h),u=Math.cos(o);i[3*M]=f,i[3*M+1]=u,i[3*M+2]=A,t>0&&b>0&&(n[s++]=M-1,n[s++]=M),t>0&&b>0&&(n[s++]=M-11,n[s++]=M),t>0&&b>0&&(a[c++]=M,a[c++]=M-1,a[c++]=M-11,a[c++]=M-1,a[c++]=M-11-1,a[c++]=M-11)}return{vertices:r,normals:i,indicesLines:n,indicesTris:a}})(),o=function(){let t,o,l=[],s={eye:[0,1,4],center:[0,0,0],up:[0,1,0],fovy:60*Math.PI/180,lrtb:2,vMatrix:e(),pMatrix:e(),projectionType:"ortho",zAngle:0,yAngle:0,distance:4};function c(e,r){let i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.log(SourceTagId+": "+t.getShaderInfoLog(i)),null)}function f(r,i){let n={};n.fillstyle=i,function(e,r){Object.assign(e,r),e.vboPos=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e.vboPos),t.bufferData(t.ARRAY_BUFFER,e.vertices,t.STATIC_DRAW),o.positionAttrib=t.getAttribLocation(o,"aPosition"),t.enableVertexAttribArray(o.positionAttrib),e.vboNormal=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e.vboNormal),t.bufferData(t.ARRAY_BUFFER,e.normals,t.STATIC_DRAW),o.normalAttrib=t.getAttribLocation(o,"aNormal"),t.enableVertexAttribArray(o.normalAttrib),e.iboLines=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.iboLines),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indicesLines,t.STATIC_DRAW),e.iboLines.numberOfElements=e.indicesLines.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),e.iboTris=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.iboTris),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indicesTris,t.STATIC_DRAW),e.iboTris.numberOfElements=e.indicesTris.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}(n,r),n.mvMatrix=e(),l.push(n)}function A(){var e,n,a,c,f,A,b,h,M,E,m,R,v,d,F,y,T,_,g,L,p,B,x;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),function(){switch(s.projectionType){case"ortho":let t=s.lrtb;e=s.pMatrix,f=1/((r=-t)-(i=t)),A=1/((n=-t)-(a=t)),u=1/((l=-10)-(c=10)),e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(r+i)*f,e[13]=(a+n)*A,e[14]=(c+l)*u,e[15]=1}var e,r,i,n,a,l,c,f,A,u;t.uniformMatrix4fv(o.pMatrixUniform,!1,s.pMatrix)}(),i(s.vMatrix),s.eye[0]=s.center[0],s.eye[1]=s.center[1],s.eye[2]=s.center[2],s.eye[0]+=s.distance*Math.sin(s.zAngle),s.eye[1]+=s.distance*Math.sin(s.yAngle),s.eye[2]+=s.distance*Math.cos(s.zAngle),e=s.vMatrix,n=s.eye,a=s.center,c=s.up,F=n[0],y=n[1],T=n[2],_=c[0],g=c[1],L=c[2],p=a[0],B=a[1],x=a[2],Math.abs(F-p)<1e-6&&Math.abs(y-B)<1e-6&&Math.abs(T-x)<1e-6?i(e):(m=F-p,R=y-B,v=T-x,f=g*(v*=d=1/Math.hypot(m,R,v))-L*(R*=d),A=L*(m*=d)-_*v,b=_*R-g*m,(d=Math.hypot(f,A,b))?(f*=d=1/d,A*=d,b*=d):(f=0,A=0,b=0),h=R*b-v*A,M=v*f-m*b,E=m*A-R*f,(d=Math.hypot(h,M,E))?(h*=d=1/d,M*=d,E*=d):(h=0,M=0,E=0),e[0]=f,e[1]=h,e[2]=m,e[3]=0,e[4]=A,e[5]=M,e[6]=R,e[7]=0,e[8]=b,e[9]=E,e[10]=v,e[11]=0,e[12]=-(f*F+A*y+b*T),e[13]=-(h*F+M*y+E*T),e[14]=-(m*F+R*y+v*T),e[15]=1);for(let e=0;e<l.length;e++)r(l[e].mvMatrix,s.vMatrix),t.uniformMatrix4fv(o.mvMatrixUniform,!1,l[e].mvMatrix),u(l[e])}function u(e){t.bindBuffer(t.ARRAY_BUFFER,e.vboPos),t.vertexAttribPointer(o.positionAttrib,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e.vboNormal),t.vertexAttribPointer(o.normalAttrib,3,t.FLOAT,!1,0,0),-1!=e.fillstyle.search(/fill/)&&(t.enableVertexAttribArray(o.normalAttrib),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.iboTris),t.drawElements(t.TRIANGLES,e.iboTris.numberOfElements,t.UNSIGNED_SHORT,0)),-1!=e.fillstyle.search(/wireframe/)&&(t.disableVertexAttribArray(o.normalAttrib),t.vertexAttrib3f(o.normalAttrib,0,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.iboLines),t.drawElements(t.LINES,e.iboLines.numberOfElements,t.UNSIGNED_SHORT,0))}return{start:function(){var e;(function(){let e=document.querySelector("#canvas1");t=e.getContext("webgl"),t.viewportWidth=e.width,t.viewportHeight=e.height})(),function(){let e=c(t.VERTEX_SHADER,"\n    attribute vec3 aPosition;\n    attribute vec3 aNormal;\n\n    uniform mat4 uPMatrix;\n    uniform mat4 uMVMatrix;\n\n    varying vec4 vColor;\n\n    void main(){\n        gl_Position = uPMatrix * uMVMatrix * vec4(aPosition, 1.0);\n\n        vColor = vec4(aNormal.x, aNormal.y, aNormal.z, 1.0);\n        vColor = (vColor + 1.0) / 2.0;\n    }\n"),r=c(t.FRAGMENT_SHADER,"\n    precision mediump float;\n    varying vec4 vColor;\n\n    void main() {\n        gl_FragColor = vColor;\n    }\n");o=t.createProgram(),t.attachShader(o,e),t.attachShader(o,r),t.bindAttribLocation(o,0,"aPosition"),t.linkProgram(o),t.useProgram(o)}(),o.pMatrixUniform=t.getUniformLocation(o,"uPMatrix"),o.mvMatrixUniform=t.getUniformLocation(o,"uMVMatrix"),function(){let t="fillwireframe";f(n,t),f(a,t)}(),e=Math.PI/36,window.onkeydown=function(t){let r=t.which?t.which:t.keyCode;switch(String.fromCharCode(r)){case"W":s.yAngle-=e;break;case"A":s.zAngle-=e;break;case"S":s.yAngle+=e;break;case"D":s.zAngle+=e}A()},t.clearColor(.95,.95,.95,1),t.frontFace(t.CCW),t.enable(t.CULL_FACE),t.cullFace(t.BACK),t.enable(t.DEPTH_TEST),t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(.5,0),t.viewport(0,0,t.viewportWidth,t.viewportHeight),s.aspect=t.viewportWidth/t.viewportHeight,A()}}}();document.body.onload=()=>{o.start()}}();
//# sourceMappingURL=bundle.js.map
